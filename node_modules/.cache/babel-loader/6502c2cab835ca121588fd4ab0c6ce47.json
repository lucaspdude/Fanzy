{"ast":null,"code":"import { all, takeLatest, call, put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport api from \"../../../services/api\";\nimport { updateProfileSucess, updateProfileFailured, updateImageSuccess, updateImageFailured, alteraFuncionamentoFailure, alteraFuncionamentoSuccess, updateConfiguracoesFailure, updateConfiguracoesSuccess, updateProfileWebSocketSuccess } from './actions';\nexport function* updateProfile({\n  payload\n}) {\n  try {\n    const {\n      id,\n      estabelecimento,\n      email,\n      ...rest\n    } = payload.data;\n    const profile = Object.assign({\n      estabelecimento,\n      email\n    }, rest.oldPassword ? rest : {});\n    const response = yield call(api.put, `estabelecimentos/${payload.data.id}`, payload.data);\n    console.log(response.data);\n    toast.success('Perfil atualizado com sucesso!');\n    yield put(updateProfileSucess(response.data));\n  } catch (err) {\n    console.log(err);\n    console.log(err.response);\n    console.log(err.response.data);\n    toast.error(err.response.data.erro);\n    yield put(updateProfileFailured());\n  }\n}\nexport function* updateImagem({\n  payload\n}) {\n  try {\n    const {\n      id,\n      ...rest\n    } = payload.data;\n    const response = yield call(api.post, `estabelecimentos/${id}/imagem`, payload.data);\n    toast.success(response.data.message);\n    yield put(updateImageSuccess(response.data));\n  } catch (err) {\n    console.log(err.response);\n    toast.error(err.response.data.erro);\n    yield put(updateImageFailured());\n  }\n}\nexport function* alteraFuncionamento({\n  payload\n}) {\n  try {\n    console.log(payload.data);\n    const response = yield call(api.post, `estabelecimentos/funcionamento`, payload.data);\n    console.log(response.data);\n    toast.success(response.data.message);\n    yield put(alteraFuncionamentoSuccess(response.data));\n  } catch (error) {\n    console.log(error.response);\n    toast.error(\"erro\");\n    yield put(alteraFuncionamentoFailure());\n  }\n}\nexport function* updateConfiguracoes({\n  payload\n}) {\n  try {\n    console.log(payload.data);\n    const response = yield call(api.post, `estabelecimentos/configuracoes/${payload.data.profile.id}`, payload.data);\n    console.log(response.data);\n    toast.success(response.data.message);\n    yield put(updateConfiguracoesSuccess(response.data));\n  } catch (error) {\n    console.log(error);\n    console.log(error.response.data);\n    toast.error(error.response.data.erro);\n    yield put(updateConfiguracoesFailure());\n  }\n}\nexport function* updateProfileWebSocket({\n  payload\n}) {\n  try {\n    yield put(updateProfileWebSocketSuccess(payload.data));\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport default all([takeLatest('@user/UPDATE_PROFILE_REQUEST', updateProfile), takeLatest('@user/UPDATE_IMAGE_REQUEST', updateImagem), takeLatest('@user/ALTERA_FUNCIONAMENTO_REQUEST', alteraFuncionamento), takeLatest('@user/UPDATE_CONFIGURACOES_REQUEST', updateConfiguracoes), takeLatest('@user/UPDATE_PROFILE_WEBSOCKET_REQUEST', updateProfileWebSocket)]);","map":{"version":3,"sources":["/home/lucas/Dev/Pessoal/App/src/store/modules/user/sagas.js"],"names":["all","takeLatest","call","put","toast","api","updateProfileSucess","updateProfileFailured","updateImageSuccess","updateImageFailured","alteraFuncionamentoFailure","alteraFuncionamentoSuccess","updateConfiguracoesFailure","updateConfiguracoesSuccess","updateProfileWebSocketSuccess","updateProfile","payload","id","estabelecimento","email","rest","data","profile","Object","assign","oldPassword","response","console","log","success","err","error","erro","updateImagem","post","message","alteraFuncionamento","updateConfiguracoes","updateProfileWebSocket"],"mappings":"AAAA,SAASA,GAAT,EAAcC,UAAd,EAA0BC,IAA1B,EAAgCC,GAAhC,QAA2C,oBAA3C;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,SACEC,mBADF,EAEEC,qBAFF,EAGEC,kBAHF,EAIEC,mBAJF,EAKEC,0BALF,EAMEC,0BANF,EAOEC,0BAPF,EAQEC,0BARF,EASEC,6BATF,QAUO,WAVP;AAYA,OAAO,UAAUC,aAAV,CAAwB;AAAEC,EAAAA;AAAF,CAAxB,EAAqC;AAC1C,MAAI;AACF,UAAM;AAAEC,MAAAA,EAAF;AAAMC,MAAAA,eAAN;AAAuBC,MAAAA,KAAvB;AAA8B,SAAGC;AAAjC,QAA0CJ,OAAO,CAACK,IAAxD;AAEA,UAAMC,OAAO,GAAGC,MAAM,CAACC,MAAP,CACd;AAAEN,MAAAA,eAAF;AAAmBC,MAAAA;AAAnB,KADc,EAEdC,IAAI,CAACK,WAAL,GAAmBL,IAAnB,GAA0B,EAFZ,CAAhB;AAIA,UAAMM,QAAQ,GAAG,MAAMxB,IAAI,CACzBG,GAAG,CAACF,GADqB,EAExB,oBAAmBa,OAAO,CAACK,IAAR,CAAaJ,EAAG,EAFX,EAGzBD,OAAO,CAACK,IAHiB,CAA3B;AAKAM,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACL,IAArB;AACAjB,IAAAA,KAAK,CAACyB,OAAN,CAAc,gCAAd;AACA,UAAM1B,GAAG,CAACG,mBAAmB,CAACoB,QAAQ,CAACL,IAAV,CAApB,CAAT;AACD,GAfD,CAeE,OAAOS,GAAP,EAAY;AACZH,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACJ,QAAhB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACJ,QAAJ,CAAaL,IAAzB;AACAjB,IAAAA,KAAK,CAAC2B,KAAN,CAAYD,GAAG,CAACJ,QAAJ,CAAaL,IAAb,CAAkBW,IAA9B;AACA,UAAM7B,GAAG,CAACI,qBAAqB,EAAtB,CAAT;AACD;AACF;AAED,OAAO,UAAU0B,YAAV,CAAuB;AAAEjB,EAAAA;AAAF,CAAvB,EAAoC;AACzC,MAAI;AACF,UAAM;AAAEC,MAAAA,EAAF;AAAM,SAAGG;AAAT,QAAkBJ,OAAO,CAACK,IAAhC;AACA,UAAMK,QAAQ,GAAG,MAAMxB,IAAI,CACzBG,GAAG,CAAC6B,IADqB,EAExB,oBAAmBjB,EAAG,SAFE,EAGzBD,OAAO,CAACK,IAHiB,CAA3B;AAKAjB,IAAAA,KAAK,CAACyB,OAAN,CAAcH,QAAQ,CAACL,IAAT,CAAcc,OAA5B;AACA,UAAMhC,GAAG,CAACK,kBAAkB,CAACkB,QAAQ,CAACL,IAAV,CAAnB,CAAT;AACD,GATD,CASE,OAAOS,GAAP,EAAY;AACZH,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACJ,QAAhB;AACAtB,IAAAA,KAAK,CAAC2B,KAAN,CAAYD,GAAG,CAACJ,QAAJ,CAAaL,IAAb,CAAkBW,IAA9B;AACA,UAAM7B,GAAG,CAACM,mBAAmB,EAApB,CAAT;AACD;AACF;AAGD,OAAO,UAAU2B,mBAAV,CAA8B;AAACpB,EAAAA;AAAD,CAA9B,EAAwC;AAC7C,MAAI;AACFW,IAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAO,CAACK,IAApB;AACA,UAAMK,QAAQ,GAAG,MAAMxB,IAAI,CAACG,GAAG,CAAC6B,IAAL,EAAY,gCAAZ,EAA6ClB,OAAO,CAACK,IAArD,CAA3B;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACL,IAArB;AACAjB,IAAAA,KAAK,CAACyB,OAAN,CAAcH,QAAQ,CAACL,IAAT,CAAcc,OAA5B;AACA,UAAMhC,GAAG,CAACQ,0BAA0B,CAACe,QAAQ,CAACL,IAAV,CAA3B,CAAT;AAED,GAPD,CAOE,OAAOU,KAAP,EAAc;AACdJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,KAAK,CAACL,QAAlB;AACAtB,IAAAA,KAAK,CAAC2B,KAAN,CAAY,MAAZ;AACA,UAAM5B,GAAG,CAACO,0BAA0B,EAA3B,CAAT;AAED;AACF;AAED,OAAO,UAAU2B,mBAAV,CAA8B;AAACrB,EAAAA;AAAD,CAA9B,EAAwC;AAC7C,MAAI;AAEFW,IAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAO,CAACK,IAApB;AACA,UAAMK,QAAQ,GAAG,MAAMxB,IAAI,CAAEG,GAAG,CAAC6B,IAAN,EAAa,kCAAiClB,OAAO,CAACK,IAAR,CAAaC,OAAb,CAAqBL,EAAG,EAAtE,EAAyED,OAAO,CAACK,IAAjF,CAA3B;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACL,IAArB;AACAjB,IAAAA,KAAK,CAACyB,OAAN,CAAcH,QAAQ,CAACL,IAAT,CAAcc,OAA5B;AACA,UAAMhC,GAAG,CAACU,0BAA0B,CAACa,QAAQ,CAACL,IAAV,CAA3B,CAAT;AAED,GARD,CAQE,OAAOU,KAAP,EAAc;AACdJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,KAAK,CAACL,QAAN,CAAeL,IAA3B;AACAjB,IAAAA,KAAK,CAAC2B,KAAN,CAAYA,KAAK,CAACL,QAAN,CAAeL,IAAf,CAAoBW,IAAhC;AACA,UAAM7B,GAAG,CAACS,0BAA0B,EAA3B,CAAT;AAED;AACF;AAGD,OAAO,UAAU0B,sBAAV,CAAiC;AAACtB,EAAAA;AAAD,CAAjC,EAA2C;AAChD,MAAI;AACF,UAAMb,GAAG,CAACW,6BAA6B,CAACE,OAAO,CAACK,IAAT,CAA9B,CAAT;AAED,GAHD,CAGE,OAAOU,KAAP,EAAc;AACdJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACD;AACF;AAED,eAAe/B,GAAG,CAAC,CACjBC,UAAU,CAAC,8BAAD,EAAiCc,aAAjC,CADO,EAEjBd,UAAU,CAAC,4BAAD,EAA+BgC,YAA/B,CAFO,EAGjBhC,UAAU,CAAC,oCAAD,EAAuCmC,mBAAvC,CAHO,EAIjBnC,UAAU,CAAC,oCAAD,EAAuCoC,mBAAvC,CAJO,EAKjBpC,UAAU,CAAC,wCAAD,EAA2CqC,sBAA3C,CALO,CAAD,CAAlB","sourcesContent":["import { all, takeLatest, call, put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport api from '~/services/api';\nimport {\n  updateProfileSucess,\n  updateProfileFailured,\n  updateImageSuccess,\n  updateImageFailured,\n  alteraFuncionamentoFailure,\n  alteraFuncionamentoSuccess,\n  updateConfiguracoesFailure,\n  updateConfiguracoesSuccess,\n  updateProfileWebSocketSuccess,\n} from './actions';\n\nexport function* updateProfile({ payload }) {\n  try {\n    const { id, estabelecimento, email, ...rest } = payload.data;\n\n    const profile = Object.assign(\n      { estabelecimento, email },\n      rest.oldPassword ? rest : {}\n    );\n    const response = yield call(\n      api.put,\n      `estabelecimentos/${payload.data.id}`,\n      payload.data\n    );\n    console.log(response.data);\n    toast.success('Perfil atualizado com sucesso!');\n    yield put(updateProfileSucess(response.data));\n  } catch (err) {\n    console.log(err);\n    console.log(err.response);\n    console.log(err.response.data);\n    toast.error(err.response.data.erro);\n    yield put(updateProfileFailured());\n  }\n}\n\nexport function* updateImagem({ payload }) {\n  try {\n    const { id, ...rest } = payload.data;\n    const response = yield call(\n      api.post,\n      `estabelecimentos/${id}/imagem`,\n      payload.data\n    );\n    toast.success(response.data.message);\n    yield put(updateImageSuccess(response.data));\n  } catch (err) {\n    console.log(err.response);\n    toast.error(err.response.data.erro);\n    yield put(updateImageFailured());\n  }\n}\n\n\nexport function* alteraFuncionamento({payload}){\n  try {\n    console.log(payload.data);\n    const response = yield call(api.post, `estabelecimentos/funcionamento`, payload.data)\n    console.log(response.data)\n    toast.success(response.data.message);\n    yield put(alteraFuncionamentoSuccess(response.data))\n\n  } catch (error) {\n    console.log(error.response)\n    toast.error(\"erro\")\n    yield put(alteraFuncionamentoFailure())\n\n  }\n}\n\nexport function* updateConfiguracoes({payload}){\n  try {\n\n    console.log(payload.data)\n    const response = yield call (api.post, `estabelecimentos/configuracoes/${payload.data.profile.id}`, payload.data)\n    console.log(response.data)\n    toast.success(response.data.message)\n    yield put(updateConfiguracoesSuccess(response.data))\n    \n  } catch (error) {\n    console.log(error)\n    console.log(error.response.data)\n    toast.error(error.response.data.erro);\n    yield put(updateConfiguracoesFailure())\n    \n  }\n}\n\n\nexport function* updateProfileWebSocket({payload}){\n  try {\n    yield put(updateProfileWebSocketSuccess(payload.data))\n    \n  } catch (error) {\n    console.log(error)\n  }\n}\n\nexport default all([\n  takeLatest('@user/UPDATE_PROFILE_REQUEST', updateProfile),\n  takeLatest('@user/UPDATE_IMAGE_REQUEST', updateImagem),\n  takeLatest('@user/ALTERA_FUNCIONAMENTO_REQUEST', alteraFuncionamento),\n  takeLatest('@user/UPDATE_CONFIGURACOES_REQUEST', updateConfiguracoes),\n  takeLatest('@user/UPDATE_PROFILE_WEBSOCKET_REQUEST', updateProfileWebSocket),\n]);\n"]},"metadata":{},"sourceType":"module"}