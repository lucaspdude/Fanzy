{"ast":null,"code":"var _jsxFileName = \"/home/lucas/Dev/Pessoal/App/src/pages/Dashboard/components/MaisConsumidos/index.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport api from \"../../../../services/api\";\nimport { useSelector } from 'react-redux';\nimport { formataValorEmReal, formataEmReal } from \"../../../../components/Calculos\";\nimport { Link } from 'react-router-dom';\nexport default function MaisConsumidos() {\n  const [itens, setItems] = useState();\n  const profile = useSelector(state => state.user.profile);\n\n  function parseItensDosPedidos(pedidos) {\n    const produtos = pedidos.map(pedido => {\n      const filtered = {};\n      filtered.produto = pedido.produto.produto;\n      filtered.quantidade = pedido.produto.quantidade;\n      filtered.valor = pedido.produto.valor;\n      filtered.id = pedido.produto.produto_id;\n      return filtered;\n    });\n    var tmp = {};\n    produtos.forEach(function (item) {\n      var tempKey = item.id;\n\n      if (!tmp.hasOwnProperty(tempKey)) {\n        tmp[tempKey] = item;\n      } else {\n        tmp[tempKey].quantidade = item.quantidade + tmp[tempKey].quantidade + item.quantidade;\n      }\n    });\n    console.log(produtos);\n    var results = Object.keys(tmp).map(function (key) {\n      return tmp[key];\n    });\n    console.log(results);\n    return results;\n  }\n\n  useEffect(() => {\n    api.get(`relatorios/maisvendidos/${profile.id}`).then(response => {\n      setItems(parseItensDosPedidos(response.data.pedidos));\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, itens && /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"mais-consumidos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, itens.slice(0, 5).map(item => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: item.id,\n      className: \"mais-consumidos-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"descricao\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/dashboard/cardapios/${item.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 37\n      }\n    }, item.produto)), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"valor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 33\n      }\n    }, \"R$ \", formataEmReal(item.valor)));\n  })));\n}","map":{"version":3,"sources":["/home/lucas/Dev/Pessoal/App/src/pages/Dashboard/components/MaisConsumidos/index.jsx"],"names":["React","useEffect","useState","api","useSelector","formataValorEmReal","formataEmReal","Link","MaisConsumidos","itens","setItems","profile","state","user","parseItensDosPedidos","pedidos","produtos","map","pedido","filtered","produto","quantidade","valor","id","produto_id","tmp","forEach","item","tempKey","hasOwnProperty","console","log","results","Object","keys","key","get","then","response","data","catch","error","slice"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '~/services/api';\nimport { useSelector } from 'react-redux';\nimport { formataValorEmReal, formataEmReal } from '~/components/Calculos';\nimport { Link } from 'react-router-dom';\n\nexport default function MaisConsumidos() {\n\n    const [itens, setItems] = useState();\n    const profile = useSelector(state => state.user.profile)\n\n    function parseItensDosPedidos(pedidos){\n\n        const produtos = pedidos.map(pedido => {\n            const filtered = {};\n            filtered.produto = pedido.produto.produto;\n            filtered.quantidade = pedido.produto.quantidade;\n            filtered.valor = pedido.produto.valor;\n            filtered.id = pedido.produto.produto_id;\n            return filtered;\n        });\n\n        \n            var tmp = {};\n            produtos.forEach(function (item) { \n                var tempKey = item.id\n                if(!tmp.hasOwnProperty(tempKey)){\n                    tmp[tempKey] = item;\n                }else{\n                   \n                    tmp[tempKey].quantidade = item.quantidade + tmp[tempKey].quantidade + item.quantidade;\n\n                }\n            })\n\n            console.log(produtos)\n            var results = Object.keys(tmp).map(function(key){\n                return tmp[key];\n            })\n\n            console.log(results)\n            \n       \n        return results;\n\n    }\n\n    useEffect(() => {\n        api.get(`relatorios/maisvendidos/${profile.id}`)\n            .then(response => {\n                setItems(parseItensDosPedidos(response.data.pedidos))\n            })\n            .catch(error => {console.log(error)})\n    }, [])\n\n\n\n\n    return (\n        <div>\n            {itens && (\n                <ul className=\"mais-consumidos\">\n                    {itens.slice(0,5).map(item => {\n                        return(\n                            <li key={item.id} className=\"mais-consumidos-item\">\n\n                                <span className=\"descricao\">\n                                    <Link to={`/dashboard/cardapios/${item.id}`}>\n                                        {item.produto}\n                                    </Link>\n                                </span>\n                                <span className=\"valor\">R$ { formataEmReal(item.valor) }</span>\n                            </li>\n                        )\n                    })}\n                </ul>\n            )}\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}